---
title: "Reading Data in R"
author: "Amanda White"
date: "`r Sys.Date()`"
output: 
  html_document:
    toc: true
    toc_float: true
    code_download: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


# Reading Data from CSVs

In R, there are some differences from how a code file and RMarkdown behave in terms of how they consider file paths.

  - **RMarkdown:** The relative path is based on the location of the RMarkdown file. **This is true when you knit the file** 
  - **Script:** The path is based on the project directory (assuming that you are working in a project)

To alleviate these issues, when we are working from a RMarkdown, we will also set the working directory to the markdown location/folder. 

```{r setwd}
setwd("C:/Users/whitea27/Desktop/ISA 401/Project/markdowns")
```
Or you can go to the Files/Plots section Click the markdowns folder > Settings drop down > Set Working Directory

```{r install}
# Always install this, it has like 8 packages
install.packages("tidyverse")
```

## Locally: From your Computer

```{r Local Read}
df = readr::read_csv("../data/US000.csv")
```


## From the Internet

```{r Unemployment Rate - FRED}
unemp_rate = readr::read_csv("https://fred.stlouisfed.org/graph/fredgraph.csv?bgcolor=%23ebf3fb&chart_type=line&drp=0&fo=open%20sans&graph_bgcolor=%23ffffff&height=450&mode=fred&recession_bars=on&txtcolor=%23444444&ts=12&tts=12&width=1320&nt=0&thu=0&trc=0&show_legend=yes&show_axis_titles=yes&show_tooltip=yes&id=UNRATE&scale=left&cosd=1948-01-01&coed=2025-12-01&line_color=%230073e6&link_values=false&line_style=solid&mark_type=none&mw=3&lw=3&ost=-99999&oet=99999&mma=0&fml=a&fq=Monthly&fam=avg&fgst=lin&fgsnd=2020-02-01&line_index=1&transformation=lin&vintage_date=2026-02-04&revision_date=2026-02-04&nd=1948-01-01")
```

## From Github

Make sure you get the raw link!
```{r Github}
super_bowl = readr::read_csv("https://raw.githubusercontent.com/rfordatascience/tidytuesday/2e9bd5a67e09b14d01f616b00f7f7e0931515d24/data/2021/2021-03-02/youtube.csv")
```



# JSON Data


We are using the jsonlite package to read the json data.
```{r cincy_jobs}
cincy_jobs = jsonlite::fromJSON(
  txt = "https://www.themuse.com/api/public/jobs?page=1&location=Cincinnati%2C%20OH",
  flatten = T
)

names(cincy_jobs)
```

```{r}
# to pull the results df we can either use [['results]], $results, or [[7]]

cincy_jobs_df = cincy_jobs[[7]]
```


Changing list columns to single columns

```{r}
cincy_jobs_df2 = cincy_jobs_df |>
  tidyr::unnest(
    cols = c("locations"), 
    names_repair = 'unique'
  )
```



